<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:composite="http://xmlns.jcp.org/jsf/composite"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:ui="http://java.sun.com/jsf/facelets">
<f:view>
    <composite:interface>
        <composite:attribute name="auction" required="true"/>
    </composite:interface>
    <composite:implementation>

        <c:set var="auction" value="#{cc.attrs.auction}"/>

        <a href="./auction.xhtml?id=${auction.id}" class="list-group-item list-group-item-action flex-column align-items-start">
            <div class="d-flex w-100 justify-content-between">

                <h5 class="mb-1">${auction.product.name}</h5>

                <small>
                    <h:outputText value="#{auction.startTime}">
                        <f:convertDateTime type="both" dateStyle="medium" timeStyle="medium"/>
                    </h:outputText>
                </small>

            </div>
            <p class="mb-1">${auction.product.description}</p>


            <c:set value="#{auction.findHighestBid()}" var="highestBid"/>

            <div class="d-flex w-100 justify-content-between">

                <ui:fragment rendered="#{not empty highestBid}">
                    <small>Highest bid: #{highestBid.amount}</small>
                </ui:fragment>

                <ui:fragment rendered="#{empty highestBid}">
                    <small>Starting price: #{auction.startingPrice}</small>
                </ui:fragment>

                <small>Buyout price: <b>#{auction.buyoutPrice}</b></small>

            </div>

        </a>
    </composite:implementation>
</f:view>
</html>
